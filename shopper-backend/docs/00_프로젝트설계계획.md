 ---
  쇼핑몰 백엔드 구현 계획

  현재 상태: Spring Boot 4.0.2 기본 골격만 존재, 아무것도 미구현

  ---
  Phase 1 - 프로젝트 세팅 (1~2일)

  1-1. 의존성 추가 (build.gradle)
  - Spring Security, Spring Data JPA, MySQL Driver
  - Redis (Spring Data Redis)
  - JWT (jjwt-api, jjwt-impl, jjwt-jackson)
  - OAuth2 Client
  - QueryDSL
  - AWS S3 SDK
  - Validation (spring-boot-starter-validation)

  1-2. 환경 설정 (application.yaml)
  - MySQL 연결 설정
  - Redis 연결 설정
  - JWT secret/expiry 설정
  - OAuth2 client-id/secret (google, kakao)
  - AWS S3 bucket 설정
  - application-local.yaml / application-prod.yaml 프로파일 분리

  1-3. 공통 모듈 구현 (global/common/)
  - BaseEntity.java — createdAt, updatedAt (JPA Auditing)
  - ApiResponse<T> — 공통 응답 래퍼
  - PageResponse<T> — 페이지 응답 래퍼

  1-4. 전역 예외 처리 (global/exception/)
  - ErrorCode.java (enum) — 에러 코드 정의
  - CustomException.java
  - GlobalExceptionHandler.java (@RestControllerAdvice)

  ---
  Phase 2 - 회원 / 인증 (3~4일)

  2-1. 엔티티 설계 (domain/user/entity/)
  - User.java — id, email, password, name, role, createdAt
  - SocialAccount.java — user, provider, providerId
  - Address.java — user, name, address, isDefault

  2-2. JWT 구현 (global/security/)
  - JwtProvider.java — 토큰 생성/검증/파싱
  - JwtFilter.java — OncePerRequestFilter (모든 요청 토큰 검사)
  - CustomUserDetails.java
  - CustomUserDetailsService.java

  2-3. Security 설정 (global/config/)
  - SecurityConfig.java — Filter Chain, permitAll/authenticated 설정
  - CorsConfig.java — CORS 허용 Origin 설정
  - RedisConfig.java — RedisTemplate Bean

  2-4. 일반 인증 API (domain/auth/)
  - POST /api/auth/signup — 회원가입 (비밀번호 BCrypt 암호화)
  - POST /api/auth/login — 로그인 → Access/Refresh Token 발급
  - POST /api/auth/refresh — Refresh Token으로 Access Token 재발급 + Rotation
  - POST /api/auth/logout — Redis에서 Refresh Token 삭제

  2-5. OAuth2 소셜 로그인 (global/security/oauth2/)
  - CustomOAuth2UserService.java — 소셜 사용자 정보 조회 및 DB 저장/로그인 처리
  - OAuth2SuccessHandler.java — JWT 발급 후 프론트엔드로 Redirect

  2-6. 회원 API (domain/user/)
  - GET /api/users/me — 내 정보 조회
  - PUT /api/users/me — 내 정보 수정
  - 배송지 CRUD (/api/users/me/addresses)

  ---
  Phase 3 - 상품 관리 (3~4일)

  3-1. 엔티티 설계 (domain/product/entity/)
  - Category.java — id, parent(self-join), name, depth
  - Product.java — id, category, name, price, stock, status(ACTIVE/INACTIVE)
  - ProductImage.java — id, product, url, isMain, sortOrder

  3-2. 상품 조회 API (공개, QueryDSL 활용)
  - GET /api/products — 목록 (페이징 + 카테고리 필터 + 키워드 검색)
  - GET /api/products/{id} — 상세

  3-3. 상품 관리 API (Admin 전용)
  - POST /api/admin/products — 상품 등록
  - PUT /api/admin/products/{id} — 상품 수정
  - DELETE /api/admin/products/{id} — 상품 삭제

  3-4. 이미지 업로드 (infra/s3/)
  - S3Uploader.java — MultipartFile → S3 업로드 → URL 반환
  - POST /api/admin/products/{id}/images — 이미지 업로드 API

  ---
  Phase 4 - 장바구니 / 주문 (2~3일)

  4-1. 엔티티 설계
  - Cart.java — user (1:1)
  - CartItem.java — cart, product, quantity
  - Order.java — user, totalPrice, status(PENDING/PAID/CANCELLED), address
  - OrderItem.java — order, product, quantity, price (스냅샷)

  4-2. 장바구니 API
  - GET /api/cart — 장바구니 조회
  - POST /api/cart/items — 상품 추가
  - PUT /api/cart/items/{id} — 수량 변경
  - DELETE /api/cart/items/{id} — 상품 삭제

  4-3. 주문 API
  - POST /api/orders — 주문 생성 (재고 차감, OrderItem 스냅샷 저장)
  - GET /api/orders/me — 내 주문 내역
  - GET /api/orders/{id} — 주문 상세

  ---
  Phase 5 - 결제 연동 (2~3일)

  5-1. 토스페이먼츠 Sandbox 설정
  - Payment.java 엔티티 — orderId, paymentKey, amount, status

  5-2. 결제 API
  - POST /api/payments/confirm — 결제 승인 (서버에서 금액 재검증 후 토스 API 호출)
  - POST /api/payments/{id}/cancel — 결제 취소/환불

  ---
  Phase 6 - 관리자 API (2~3일)

  - 상품/주문/회원 전체 조회 (Admin 권한)
  - 주문 상태 변경 API
  - 회원 목록 조회, 권한 변경

  ---
  Phase 7 - 배포 (1~2일)

  - Dockerfile 작성
  - docker-compose.yml (MySQL + Redis + App)
  - GitHub Actions CI/CD 파이프라인
  - AWS EC2 + RDS + ElastiCache 배포

  ---
  구현 우선 순위 요약
```angular2html
  Phase 1 (세팅) → Phase 2 (인증) → Phase 3 (상품)
  → Phase 4 (장바구니/주문) → Phase 5 (결제) → Phase 6 (관리자) → Phase 7 (배포)
```

###  Todos
-  ☒ 설계 문서 분석 및 구현 계획 수립
-  ☐ Phase 1: 프로젝트 세팅 (의존성, DB, 공통 모듈)
-  ☐ Phase 2: 회원/인증 (JWT, OAuth2)
-  ☐ Phase 3: 상품 관리 (CRUD, 카테고리, S3)
-  ☐ Phase 4: 장바구니/주문
-  ☐ Phase 5: 결제 연동 (토스페이먼츠)
-  ☐ Phase 6: 관리자 페이지 API
-  ☐ Phase 7: 배포 (Docker + AWS)